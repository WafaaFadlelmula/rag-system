version: '3.8'

services:
  rag-system:
    build:
      context: ..
      dockerfile: docker/Dockerfile
    container_name: rag-system-docling
    volumes:
      - ../data:/app/data
      - ../src:/app/src
      - ../scripts:/app/scripts
    environment:
      - LOG_LEVEL=INFO
      - OUTPUT_FORMAT=markdown
      - EXPORT_TABLES=true
    command: tail -f /dev/null

  qdrant:
    image: qdrant/qdrant:latest
    container_name: qdrant
    ports:
      - "6333:6333"   # REST API + dashboard
      - "6334:6334"   # gRPC
    volumes:
      - ../data/qdrant:/qdrant/storage   # persists data to data/qdrant/
    restart: unless-stopped