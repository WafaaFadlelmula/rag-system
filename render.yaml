services:
  - type: web
    name: ecoice-rag-api
    runtime: python
    region: frankfurt          # same region as your Qdrant Cloud cluster (europe-west3)

    buildCommand: pip install -r requirements-backend.txt

    # PYTHONPATH=src makes `rag_system` importable without an editable install
    startCommand: PYTHONPATH=src python scripts/serve.py

    # Health-check endpoint — Render uses this to confirm the service is up
    healthCheckPath: /api/v1/health

    envVars:
      - key: PYTHONPATH
        value: src

      # Set these in the Render dashboard — never commit real values here
      - key: OPENAI_API_KEY
        sync: false            # "sync: false" = Render will prompt you to fill it in

      - key: QDRANT_URL
        sync: false

      - key: QDRANT_API_KEY
        sync: false

      # Optional: point monitoring DB at a persistent disk path
      # - key: MONITORING_DB_PATH
      #   value: /var/data/queries.db
